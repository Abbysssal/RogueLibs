# Кастомные имена

import Tabs from '@site/src/components/Tabs';
import TabItem from '@site/src/components/TabItem';

## Конструкторы и свойства {#ctors-and-props}

Структура `CustomNameInfo` используется для создания кастомных имён и передачи данных между объектами `CustomName`.

```csharp
CustomNameInfo emptyInfo = new CustomNameInfo();
CustomNameInfo nameInfo = new CustomNameInfo("english text");
CustomNameInfo infoFromDict = new CustomNameInfo(
    new Dictionary<LanguageCode, string>
    {
        [LanguageCode.English] = "english text",
        [LanguageCode.Russian] = "русский текст",
    });
```

Можно добавить больше переводов в кастомные имена:

<Tabs
    defaultValue="indexer"
    values={[
        {label:'Свойство-индексатор', value:'indexer'},
        {label:'Именованные свойства', value:'named'},
    ]}>
<TabItem value="indexer">

```csharp
nameInfo = new CustomNameInfo
{
    [LanguageCode.French] = "texte français",
    [LanguageCode.Spanish] = "texto en español",
};
// или
nameInfo[LanguageCode.French] = "texte français";
nameInfo[LanguageCode.Spanish] = "texto en español";
```

Вы также можете использовать свои коды языков:

```csharp
nameInfo[(LanguageCode)123] = "日本語テキスト";
```

:::info
Смотрите подробнее [далее на этой странице](#custom-languages).
:::

</TabItem>
<TabItem value="named">

```csharp
nameInfo = new CustomNameInfo
{
    French = "texte français",
    Spanish = "texto en español",
};
// или
nameInfo.French = "texte français";
nameInfo.Spanish = "texto en español";
```

</TabItem>
</Tabs>

В отличие от словарей, и `CustomName`, и `CustomNameInfo` возвращают `null`, если в них нет определённого `LanguageCode`:

```csharp
string translation = nameInfo[(LanguageCode)123];
// возвращает null если язык не определён
string display = translation ?? nameInfo.English;
```

## Инициализация {#initialization}

Обычно, `CustomName` создаются автоматически, когда вы добавляете названия и описания своим кастомным предметам:

```csharp
RogueLibs.CreateCustomItem<MyCustomItem>()
    .WithName(new CustomNameInfo("English name")
    {
        Russian = "Русское название"
    })
    .WithDescription(new CustomNameInfo("English description")
    {
        Russian = "Русское описание"
    });
```

Вы можете инициализировать их вручную тоже, но вам придётся указывать имя и тип `CustomName` вручную:

```csharp
CustomName name = RogueLibs.CreateCustomName("Name", "Type", new CustomNameInfo("Info"));
```

Если вы будете использовать второй метод, то вот список типов, используемых в игре:

- `Item` - названия предметов и специальных способностей;
- `Description` - описания предметов, специальных способностей, особенностей, статусных эффектов и персонажей;
- `StatusEffect` - названия особенностей и статусных эффектов;
- `Interface` - названия кнопок и текст в интерфейсе;
- `Unlock` - названия и описания мутаторов и Больших Квестов;
- `Object` - названия объектов и типов чанков;
- `Agent` - названия персонажей;
- `Dialogue` - фразы персонажей;

## Кастомные языки {#custom-languages}

Вы можете добавить свои языки в игру с помощью метода `CustomName.RegisterLanguageCode`:

```csharp
CustomName.RegisterLanguageCode("japanese", (LanguageCode)123);
```

:::caution Work-In-Progress
Кастомные языки ещё не добавляются в меню настроек игры.
:::

## Поставщики кастомных имён {#name-providers}

Если у вас какая-то сложная схема наименований, то вы можете использовать `INameProvider`. Таким образом вы можете контролировать какие строки возвращаются методом `NameDB.GetName`. Просто создайте класс реализующий `INameProvider` и добавьте его в `RogueLibsInternals`.

```csharp title="MyProvider.cs"
public class MyProvider : INameProvider
{
    public NameDB NameDB { get; set; }
    public LanguageCode Language { get; set; }
    public void GetName(string name, string type, ref string result)
    {
        if (name.StartsWith("fake_"))
        {
            string sub = name.Substring("fake_".Length);
            result = NameDB.GetName(sub, type);
        }
    }
}
```

```csharp
RogueLibsInternals.NameProviders.Add(new MyProvider());
```

## Локализации {#localizations}

:::caution Work-In-Progress
Этот раздел в процессе написания.
:::

Вот как выглядит плагин кастомной локализации:

```csharp
using BepInEx;
using RogueLibsCore;

namespace MyCoolMod
{
    [BepInPlugin(pluginGUID, pluginName, pluginVersion)]
    [BepInDependency(MyCoolPlugin.pluginGUID)] // вот где те константы оказываются полезными
    public class RussianLocalization : BaseUnityPlugin
    {
        public const string pluginGUID = "myusername.streetsofrogue.mycoolmod.russian";
        public const string pluginName = "My Cool Mod [RUS]";
        public const string pluginVersion = "0.1.0";

        public void Awake()
        {
            
        }
    }
}
```
